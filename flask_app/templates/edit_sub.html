{% extends "./base.html" %}
{% block base %}

<div class="container rounded w-50 my-5 p-4">
    <h1 class="text-center text-success mb-5">Edit {{sub.name}}</h1>
    <form action="/update_sub/{{sub.id}}" method="post" enctype="multipart/form-data">
        <p class="fs-3 text-success mt-5 border-success border-bottom">General Info</p>
        <div class="d-flex justify-content-between gap-5 mt-4">
            <div class="w-50">
                <div class="mb-3">
                    <label for="name" class="form-label">Sub Name</label>
                    <input type="text" name="name" class="form-control" value="{{sub.name}}">
                </div>
                <label for="price" class="form-label">Price</label>
                <div class="input-group mb-3">
                    <span class="input-group-text">$</span>
                    <input type="number" step="0.01" name="price" class="form-control" value="{{sub.price}}">
                </div>
            </div>
            <div class="w-50">
                <div class="mb-3">
                    <label for="image" class="form-label">Sub Image</label>
                    <input type="file" src="{{sub.img_url}}" alt="sandwich" name="image" id="file-upload" accept="*.gif, *.jpg, *.png" class="form-control" required>
                </div>
                <div class="mb-3 w-50 d-none" id="file-preview-area"> 
                    <p>Image Preview</p>
                    <img class="file-preview" id="file-preview">
                </div>
            </div>
        </div>
        <p class="fs-3 text-success border-success border-bottom mt-3">Description</p>
        <div class="mb-3">
            <div class="mb-3">
                <label for="brief_description" class="form-label">Brief</label>
            <textarea name="brief_description" cols="30" rows="2" class="form-control">{{sub.brief_description}}</textarea>
            </div>
        </div>
        <div class="mb-3">
            <label for="full_description" class="form-label">Full Description</label>
            <textarea name="full_description" cols="30" rows="6" class="form-control">{{sub.full_description}}</textarea>
        </div>
        <p class="fs-3 text-success border-success border-bottom mt-3">Ingredients</p>
        <div class="d-flex justify-content-between gap-5 mt-4">
            <div class="w-50">
                <div class="mb-3">
                    <label for="bread" class="form-label">Bread</label>
                    <input type="text" name="bread" class="form-control" value="{{sub.bread}}">
                </div>
                <div class="mb-3">
                    <label for="cheese" class="form-label">Cheese</label>
                    <input type="text" name="cheese" class="form-control" value="{{sub.cheese}}">
                </div>
                <div class="mb-3">
                    <label for="sauce" class="form-label">Sauce</label>
                    <input type="text" name="sauce" class="form-control" value="{{sub.sauce}}">
                </div>
            </div>
            <div class="w-50">
                <div class="mb-3">
                    <label for="protein" class="form-label">Protein</label>
                    <input type="text" name="protein" class="form-control" value="{{sub.protein}}">
                </div>
                <div class="mb-3">
                    <label for="vegetables" class="form-label">Vegetables</label>
                    <input type="text" name="vegetables" class="form-control" value="{{sub.vegetables}}">
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end gap-3 mt-5">
            <a href="/menu" class="btn btn-secondary h-75">Cancel</a>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteConfirmation">Delete</button>
            
            <!-- Modal -->
            <div class="modal fade" id="deleteConfirmation" tabindex="-1" aria-labelledby="deleteConfirmationlLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="deleteConfirmationLabel">Delete {{sub.name}}</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">Are you sure you want to delete the {{sub.name}} sandwich? This action cannot be undone.</div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <a href="/delete_sub/{{sub.id}}" class="btn btn-danger">Delete</a>
                        </div>
                    </div>
                </div>
            </div>
            <input type="submit" class="btn btn-warning" value="Save">
        </div>
    </form>
    
</div>

<!-- FOOTER -->
<div class="bg-success border-top border-warning border-3" style="width: 100%; height: 50px;"></div>

<script src="../static/js/script.js"></script>
{% endblock base %}
